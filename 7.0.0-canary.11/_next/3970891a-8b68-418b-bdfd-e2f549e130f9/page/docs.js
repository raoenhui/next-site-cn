module.exports=__NEXT_REGISTER_PAGE("/docs",function(){return{page:webpackJsonp([2],{219:function(e,n,t){e.exports=t(220)},220:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(0),o=t.n(a),r=t(221),m={title:"快速开始",description:"创建Next.js项目",date:"2018-08-27T02:09:35.275Z",url:" http://nextjs.frontendx.cn/docs/getting-started/setup",link:"/docs/getting-started/setup"},c=function(e){var n=e.components;return o.a.createElement(r.MDXTag,{name:"wrapper"},o.a.createElement(r.MDXTag,{name:"h3",components:n},"安装"),o.a.createElement(r.MDXTag,{name:"p",components:n},"安装它:"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-bash"]}},"npm install --save next react react-dom\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"将下面脚本添加到 package.json 中:"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "scripts": {\n    "dev": "next",\n    "build": "next build",\n    "start": "next start"\n  }\n}\n')),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"Next.js 只支持",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://reactjs.org/blog/2017/09/26/react-v16.0.html"}},"React 16"),".",o.a.createElement("br",null),"由于我们使用 React 16 的特性，所以不得不放弃对 React 15 以及以下版本的支持. 当前译版为7.0.0-canary.8")),o.a.createElement(r.MDXTag,{name:"p",components:n},"下面, 文件系统是主要的 API. 每个",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".js")," 文件将变成一个路由，自动处理和渲染。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"新建 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"./pages/index.js")," 到你的项目中:"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"export default () => <div>Welcome to next.js!</div>\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"运行 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"npm run dev")," 命令并打开 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"http://localhost:3000"),"。 如果你想使用其他端口，可运行 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"npm run dev -- -p <设置端口号>"),"."),o.a.createElement(r.MDXTag,{name:"p",components:n},"目前为止我们可以了解到:"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"自动打包编译 (使用 webpack 和 babel)"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"热加载"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"以 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"./pages"),"作为服务端的渲染和索引"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"Static file serving. ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"./static/")," is mapped to ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"/static/")," (given you ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"#static-file-serving-eg-images"}},"create a ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"./static/")," directory")," inside your project)"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"静态文件服务. ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"./static/")," 映射到 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"/static/")," (可以 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"#static-file-serving-eg-images"}},"创建一个静态目录")," 在你的项目中)")),o.a.createElement(r.MDXTag,{name:"p",components:n},"这里有个简单的案例，可以下载看看 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/nextgram"}},"sample app - nextgram")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"代码自动分割"),o.a.createElement(r.MDXTag,{name:"p",components:n},"每个页面只会导入",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"import"),"中绑定以及被用到的代码. 也就是说并不会加载不需要的代码!"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import cowsay from 'cowsay-browser'\n\nexport default () =>\n  <pre>\n    {cowsay.say({ text: 'hi there!' })}\n  </pre>\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"CSS"),o.a.createElement(r.MDXTag,{name:"h4",components:n},"支持嵌入样式"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"案例")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/canary/examples/basic-css"},"Basic css")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们绑定 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/styled-jsx"}},"styled-jsx"),' 来生成独立作用域的 CSS. 目标是支持 "shadow CSS",但是 ',o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/w3c/webcomponents/issues/71"}},"不支持独立模块作用域的 JS"),"."),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"export default () =>\n  <div>\n    Hello world\n    <p>scoped!</p>\n    <style jsx>{`\n      p {\n        color: blue;\n      }\n      div {\n        background: red;\n      }\n      @media (max-width: 600px) {\n        div {\n          background: blue;\n        }\n      }\n    `}</style>\n    <style global jsx>{`\n      body {\n        background: black;\n      }\n    `}</style>\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"想查看更多案例可以点击 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://www.npmjs.com/package/styled-jsx"}},"styled-jsx documentation"),"查看."),o.a.createElement(r.MDXTag,{name:"h4",components:n},"内嵌样式"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-styled-components"},"Styled components")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-styletron"},"Styletron")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-glamor"},"Glamor")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-glamorous"},"Glamorous")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-cxs"},"Cxs")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-aphrodite"},"Aphrodite")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-fela"},"Fela")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"有些情况可以使用 CSS 内嵌 JS 写法。如下所示："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"export default () => <p style={{ color: 'red' }}>hi there</p>\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"更复杂的内嵌样式解决方案，特别是服务端渲染的时样式更改。我们可以通过包裹自定义 Document，来添加样式，案例如下：",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#user-content-custom-document"}},"custom ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"<Document>"))),o.a.createElement(r.MDXTag,{name:"h4",components:n},"使用 CSS / Sass / Less / Stylus files"),o.a.createElement(r.MDXTag,{name:"p",components:n},"支持用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".css"),", ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".scss"),", ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".less")," or ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".styl"),"，需要配置默认文件 next.config.js，具体可查看下面链接"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-css"}},"@zeit/next-css")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-sass"}},"@zeit/next-sass")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-less"}},"@zeit/next-less")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-stylus"}},"@zeit/next-stylus"))),o.a.createElement(r.MDXTag,{name:"h3",components:n},"静态文件服务（如图像）"),o.a.createElement(r.MDXTag,{name:"p",components:n},"在根目录下新建文件夹叫",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"static"),"。代码可以通过",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/static/"),"来引入相关的静态资源。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'export default () => <img src="/static/my-image.png" alt="my image" />\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"_注意：不要自定义静态文件夹的名字，只能叫",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"static")," ，因为只有这个名字 Next.js 才会把它当作静态资源。"),o.a.createElement(r.MDXTag,{name:"h3",components:n},"生成",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h3"},"<head>")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<head>")),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/head-elements"},"Head elements")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/layout-component"},"Layout component")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们设置一个内置组件来装载",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<head>"),"到页面中。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Head from \'next/head\'\n\nexport default () =>\n  <div>\n    <Head>\n      <title>My page title</title>\n      <meta name="viewport" content="initial-scale=1.0, width=device-width" />\n    </Head>\n    <p>Hello world!</p>\n  </div>\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们定义",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"key"),"属性来避免重复的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<head>"),"标签，保证",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<head>"),"只渲染一次，如下所示："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Head from \'next/head\'\nexport default () => (\n  <div>\n    <Head>\n      <title>My page title</title>\n      <meta name="viewport" content="initial-scale=1.0, width=device-width" key="viewport" />\n    </Head>\n    <Head>\n      <meta name="viewport" content="initial-scale=1.2, width=device-width" key="viewport" />\n    </Head>\n    <p>Hello world!</p>\n  </div>\n)\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"只有第二个",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},'<meta name="viewport" />'),"才被渲染。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意：在卸载组件时，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<head>"),"的内容将被清除。请确保每个页面都在其",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<head>"),"定义了所需要的内容，而不是假设其他页面已经加过了"),o.a.createElement(r.MDXTag,{name:"h3",components:n},"获取数据以及组件生命周期"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/data-fetch"},"Data fetch")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你需要一个有状态、生命周期或有初始数据的 React 组件（而不是上面的无状态函数），如下所示："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\n\nexport default class extends React.Component {\n  static async getInitialProps({ req }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent }\n  }\n\n  render() {\n    return (\n      <div>\n        Hello World {this.props.userAgent}\n      </div>\n    )\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"相信你注意到，当页面渲染时加载数据，我们使用了一个异步方法",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。它能异步获取 JS 普通对象，并绑定在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"props"),"上"),o.a.createElement(r.MDXTag,{name:"p",components:n},"当服务渲染时，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"将会把数据序列化，就像",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"JSON.stringify"),"。所以确保",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"返回的是一个普通 JS 对象，而不是",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Date"),", ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Map")," 或 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Set"),"类型。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"当页面初次加载时，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"只会在服务端执行一次。",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"只有在路由切换的时候（如",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件跳转或路由自定义跳转）时，客户端的才会被执行。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"当页面初始化加载时，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"只会加载在服务端。只有当路由跳转（",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件跳转或 API 方法跳转）时，客户端才会执行",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意：",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"将不能使用在子组件中。只能使用在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"pages"),"页面中。"),o.a.createElement("br",null),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"只有服务端用到的模块放在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"里，请确保正确的导入了它们，可参考",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://arunoda.me/blog/ssr-and-server-only-modules"}},"import them properly"),"。 否则会拖慢你的应用速度。")),o.a.createElement("br",null),o.a.createElement(r.MDXTag,{name:"p",components:n},"你也可以给无状态组件定义",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"const Page = ({ stars }) =>\n  <div>\n    Next stars: {stars}\n  </div>\n\nPage.getInitialProps = async ({ req }) => {\n  const res = await fetch('https://api.github.com/repos/zeit/next.js')\n  const json = await res.json()\n  return { stars: json.stargazers_count }\n}\n\nexport default Page\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"入参对象的属性如下："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"pathname")," - URL 的 path 部分"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"query")," - URL 的 query 部分，并被解析成对象"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"asPath")," - 显示在浏览器中的实际路径（包含查询部分），为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"req")," - HTTP 请求对象 (只有服务器端有)"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"res")," - HTTP 返回对象 (只有服务器端有)"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"jsonPageRes")," - ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Response"}},"获取数据响应对象")," (只有客户端有)"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"err")," - 渲染过程中的任何错误")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"路由"),o.a.createElement(r.MDXTag,{name:"h4",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h4"},"<Link>"),"用法"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/hello-world"},"Hello World")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"可以用 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>")," 组件实现客户端的路由切换。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/index.js\nimport Link from 'next/link'\n\nexport default () =>\n  <div>\n    Click{' '}\n    <Link href=\"/about\">\n      <a>here</a>\n    </Link>{' '}\n    to read more\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/about.js\nexport default () => <p>Welcome to About!</p>\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意：可以使用",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#prefetching-pages"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"<Link prefetch>")),"使链接和预加载在后台同时进行，来达到页面的最佳性能。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"客户端路由行为与浏览器很相似："),o.a.createElement(r.MDXTag,{name:"ol",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ol"},"组件获取"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ol"},"如果组件定义了",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"getInitialProps"),"，数据获取了。如果有错误情况将会渲染 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"_error.js"),"。"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ol"},"1和2都完成了，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"pushState"),"执行，新组件被渲染。")),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果需要注入",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"pathname"),", ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"query")," 或 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"asPath"),"到你组件中，你可以使用",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#using-a-higher-order-component"}},"withRouter"),"。"),o.a.createElement(r.MDXTag,{name:"h5",components:n},"URL 对象"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-url-object-routing"},"With URL Object Routing")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"组件",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"接收 URL 对象，而且它会自动格式化生成 URL 字符串"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/index.js\nimport Link from 'next/link'\n\nexport default () =>\n  <div>\n    Click{' '}\n    <Link href={{ pathname: '/about', query: { name: 'Zeit' }}}>\n      <a>here</a>\n    </Link>{' '}\n    to read more\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"将生成 URL 字符串",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/about?name=Zeit"),"，你可以使用任何在",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://nodejs.org/api/url.html#url_url_strings_and_url_objects"}},"Node.js URL module documentation"),"定义过的属性。"),o.a.createElement(r.MDXTag,{name:"h5",components:n},"替换路由"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件默认将新 url 推入路由栈中。你可以使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"replace"),"属性来防止添加新输入。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// pages/index.js\nimport Link from 'next/link'\n\nexport default () =>\n  <div>\n    Click{' '}\n    <Link href=\"/about\" replace>\n      <a>here</a>\n    </Link>{' '}\n    to read more\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"h5",components:n},"组件支持点击事件 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h5"},"onClick")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"支持每个组件所支持的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"onClick"),"事件。如果你不提供",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签，只会处理",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"onClick"),"事件而",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"href"),"将不起作用。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'// pages/index.js\nimport Link from \'next/link\'\n\nexport default () =>\n  <div>\n    Click{\' \'}\n    <Link href="/about">\n      <img src="/static/image.png" alt="image" />\n    </Link>\n  </div>\n')),o.a.createElement(r.MDXTag,{name:"h5",components:n},"暴露 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h5"},"href")," 给子元素"),o.a.createElement(r.MDXTag,{name:"p",components:n},"如子元素是一个没有 href 属性的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签，我们将会指定它以免用户重复操作。然而有些时候，我们需要里面有",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签，但是",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件不会被识别成",o.a.createElement(r.MDXTag,{name:"em",components:n,parentName:"p"},"超链接"),"，结果不能将",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"href"),"传递给子元素。在这种场景下，你可以定义一个",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Link"),"组件中的布尔属性",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"passHref"),"，强制将",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"href"),"传递给子元素。"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"p"},"注意"),": 使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"a"),"之外的标签而且没有通过",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"passHref"),"的链接可能会使导航看上去正确，但是当搜索引擎爬行检测时，将不会识别成链接（由于缺乏 href 属性），这会对你网站的 SEO 产生负面影响。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import Link from 'next/link'\nimport Unexpected_A from 'third-library'\n\nexport default ({ href, name }) =>\n  <Link href={href} passHref>\n    <Unexpected_A>\n      {name}\n    </Unexpected_A>\n  </Link>\n")),o.a.createElement(r.MDXTag,{name:"h5",components:n},"禁止滚动到页面顶部"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"的默认行为就是滚到页面顶部。当有 hash 定义时（＃），页面将会滚动到对应的 id 上，就像",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<a>"),"标签一样。为了预防滚动到顶部，可以给",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"加",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"scroll={false}"),"属性："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'<Link scroll={false} href="/?counter=10"><a>Disables scrolling</a></Link>\n<Link href="/?counter=10"><a>Changes with scrolling to top</a></Link>\n')),o.a.createElement(r.MDXTag,{name:"h4",components:n},"命令式"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/using-router"},"Basic routing")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-loading"},"With a page loading indicator")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"你也可以用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/router"),"实现客户端路由切换"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import Router from 'next/router'\n\nexport default () =>\n  <div>\n    Click <span onClick={() => Router.push('/about')}>here</span> to read more\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"拦截器 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h4"},"popstate")),o.a.createElement(r.MDXTag,{name:"p",components:n},"有些情况（比如使用",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#custom-server-and-routing"}},"custom router"),"），你可能想监听",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://developer.mozilla.org/en-US/docs/Web/Events/popstate"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"popstate")),"，在路由跳转前做一些动作。 比如，你可以操作 request 或强制 SSR 刷新"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Router from \'next/router\'\n\nRouter.beforePopState(({ url, as, options }) => {\n  // I only want to allow these two routes!\n  if (as !== "/" || as !== "/other") {\n    // Have SSR render bad routes as a 404.\n    window.location.href = as\n    return false\n  }\n\n  return true\n});\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"beforePopState"),"中返回 false，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Router"),"将不会执行",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"popstate"),"事件。 例如",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#disabling-file-system-routing"}},"Disabling File-System Routing"),"。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"以上",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Router"),"对象的 API 如下："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"route")," - 当前路由的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"pathname")," - 不包含查询内容的当前路径，为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"query")," - 查询内容，被解析成",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"Object"),"类型. 默认为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"{}")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"asPath")," - 展现在浏览器上的实际路径，包含查询内容，为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"String"),"类型"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"push(url, as=url)")," - 页面渲染第一个参数 url 的页面，浏览器栏显示的是第二个参数 url"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"replace(url, as=url)")," - performs a ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"replaceState")," call with the given url"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"beforePopState(cb=function)")," - 在路由器处理事件之前拦截.")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"push")," 和 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"replace")," 函数的第二个参数",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"as"),"，是为了装饰 URL 作用。如果你在服务器端设置了自定义路由将会起作用。"),o.a.createElement(r.MDXTag,{name:"h5",components:n},"URL 对象用法"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"push")," 或 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"replace"),"可接收的 URL 对象（",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件的 URL 对象一样）来生成 URL。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import Router from 'next/router'\n\nconst handler = () =>\n  Router.push({\n    pathname: '/about',\n    query: { name: 'Zeit' }\n  })\n\nexport default () =>\n  <div>\n    Click <span onClick={handler}>here</span> to read more\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"也可以像",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件一样添加额外的参数。"),o.a.createElement(r.MDXTag,{name:"h5",components:n},"路由事件"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你可以监听路由相关事件。 下面是事件支持列表："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"routeChangeStart(url)")," - 路由开始切换时触发"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"routeChangeComplete(url)")," - 完成路由切换时触发"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"routeChangeError(err, url)")," - 路由切换报错时触发"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"beforeHistoryChange(url)")," - 浏览器 history 模式开始切换时触发"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"hashChangeStart(url)")," - 开始切换 hash 值但是没有切换页面路由时触发"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"hashChangeComplete(url)")," - 完成切换 hash 值但是没有切换页面路由时触发")),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"这里的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"url"),"是指显示在浏览器中的 url。如果你用了",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Router.push(url, as)"),"（或类似的方法），那浏览器中的 url 将会显示 as 的值。")),o.a.createElement(r.MDXTag,{name:"p",components:n},"下面是如何正确使用路由事件",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"routeChangeStart"),"的例子："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const handleRouteChange = url => {\n  console.log('App is changing to: ', url)\n}\n\nRouter.events.on('routeChangeStart', handleRouteChange)\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你不想长期监听该事件，你可以用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"off"),"事件去取消监听："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"Router.events.off('routeChangeStart', handleRouteChange)\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果路由加载被取消（比如快速连续双击链接）"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"Router.events.on('routeChangeError', (err, url) => {\n  if (err.cancelled) {\n    console.log(`Route to ${url} was cancelled!`)\n  }\n})\n")),o.a.createElement(r.MDXTag,{name:"h5",components:n},"浅层路由"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-shallow-routing"},"Shallow Routing")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"浅层路由允许你改变 URL 但是不执行",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"生命周期。你可以加载相同页面的 URL，得到更新后的路由属性",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"pathname"),"和",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"query"),"，并不失去 state 状态。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你可以给",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Router.push")," 或 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Router.replace"),"方法加",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"shallow: true"),"参数。如下面的例子所示："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// Current URL is \"/\"\nconst href = '/?counter=10'\nconst as = href\nRouter.push(href, as, { shallow: true })\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"现在 URL 更新为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/?counter=10"),"。在组件里查看",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"this.props.router.query"),"你将会看到更新的 URL。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你可以在",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://facebook.github.io/react/docs/react-component.html#componentdidupdate"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"componentdidupdate")),"钩子函数中监听 URL 的变化。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"componentDidUpdate(prevProps) {\n  const { pathname, query } = this.props.router\n  // verify props have changed to avoid an infinite loop\n  if (query.id !== prevProps.router.query.id) {\n    // fetch data based on the new query\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"注意:"),o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"浅层路由只作用于相同 URL 的参数改变，比如我们假定有个其他路由",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"about"),"，而你向下面代码样运行:"),o.a.createElement(r.MDXTag,{name:"pre",components:n,parentName:"blockquote"},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"Router.push('/?counter=10', '/about?counter=10', { shallow: true })\n")),o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"那么这将会出现新页面，即使我们加了浅层路由，但是它还是会卸载当前页，会加载新的页面并触发新页面的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"高阶组件"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/using-with-router"},"Using the `withRouter` utility")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你想应用里每个组件都处理路由对象，你可以使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"withRouter"),"高阶组件。下面是如何使用它："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import { withRouter } from 'next/router'\n\nconst ActiveLink = ({ children, router, href }) => {\n  const style = {\n    marginRight: 10,\n    color: router.pathname === href? 'red' : 'black'\n  }\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    router.push(href)\n  }\n\n  return (\n    <a href={href} onClick={handleClick} style={style}>\n      {children}\n    </a>\n  )\n}\n\nexport default withRouter(ActiveLink)\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"上面路由对象的 API 可以参考",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#imperatively"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"next/router")),"."),o.a.createElement(r.MDXTag,{name:"h3",components:n},"预加载页面"),o.a.createElement(r.MDXTag,{name:"p",components:n},"⚠️ 只有生产环境才有此功能 ⚠️"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-prefetching"},"Prefetching")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"Next.js 有允许你预加载页面的 API。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"用 Next.js 服务端渲染你的页面，可以达到所有你应用里所有未来会跳转的路径即时响应，有效的应用 Next.js，可以通过预加载应用程序的功能，最大程度的初始化网站性能。",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/blog/next#anticipation-is-the-key-to-performance"}},"查看更多"),"."),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"Next.js 的预加载功能只预加载 JS 代码。当页面渲染时，你可能需要等待数据请求。")),o.a.createElement(r.MDXTag,{name:"h4",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h4"},"<Link>"),"用法"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你可以给",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"添加 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"prefetch")," 属性，Next.js 将会在后台预加载这些页面。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},'import Link from \'next/link\'\n\n// example header component\nexport default () =>\n  <nav>\n    <ul>\n      <li>\n        <Link prefetch href="/">\n          <a>Home</a>\n        </Link>\n      </li>\n      <li>\n        <Link prefetch href="/about">\n          <a>About</a>\n        </Link>\n      </li>\n      <li>\n        <Link prefetch href="/contact">\n          <a>Contact</a>\n        </Link>\n      </li>\n    </ul>\n  </nav>\n')),o.a.createElement(r.MDXTag,{name:"h4",components:n},"命令式 prefetch 写法"),o.a.createElement(r.MDXTag,{name:"p",components:n},"大多数预加载是通过",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link />"),"处理的，但是我们还提供了命令式 API 用于更复杂的场景。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import { withRouter } from 'next/router'\n\nexport default withRouter(({ router }) =>\n  <div>\n    <a onClick={() => setTimeout(() => router.push('/dynamic'), 100)}>\n      A route transition will happen after 100ms\n    </a>\n    {// but we can prefetch it!\n    router.prefetch('/dynamic')}\n  </div>\n)\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"路由实例只允许在应用程序的客户端。以防服务端渲染发生错误，建议 prefetch 事件写在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"componentDidMount()"),"生命周期里。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\nimport { withRouter } from 'next/router'\n\nclass MyLink extends React.Component {\n  componentDidMount() {\n    const { router } = this.props\n    router.prefetch('/dynamic')\n  }\n\n  render() {\n    const { router } = this.props\n    return (\n       <div>\n        <a onClick={() => setTimeout(() => router.push('/dynamic'), 100)}>\n          A route transition will happen after 100ms\n        </a>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(MyLink)\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"自定义服务端路由"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/custom-server"},"Basic custom server")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/custom-server-express"},"Express integration")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/custom-server-hapi"},"Hapi integration")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/custom-server-koa"},"Koa integration")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/parameterized-routing"},"Parameterized routing")),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/ssr-caching"},"SSR caching")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"一般你使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next start"),"命令来启动 next 服务，你还可以编写代码来自定义路由，如使用路由正则等。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"当使用自定义服务文件，如下面例子所示叫 server.js 时，确保你更新了 package.json 中的脚本。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "scripts": {\n    "dev": "node server.js",\n    "build": "next build",\n    "start": "NODE_ENV=production node server.js"\n  }\n}\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"下面这个例子使 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/a")," 路由解析为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"./pages/b"),"，以及",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/b")," 路由解析为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"./pages/a"),";"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// This file doesn't go through babel or webpack transformation.\n// Make sure the syntax and sources this file requires are compatible with the current node version you are running\n// See https://github.com/zeit/next.js/issues/1245 for discussions on Universal Webpack or universal Babel\nconst { createServer } = require('http')\nconst { parse } = require('url')\nconst next = require('next')\n\nconst dev = process.env.NODE_ENV !== 'production'\nconst app = next({ dev })\nconst handle = app.getRequestHandler()\n\napp.prepare().then(() => {\n  createServer((req, res) => {\n    // Be sure to pass `true` as the second argument to `url.parse`.\n    // This tells it to parse the query portion of the URL.\n    const parsedUrl = parse(req.url, true)\n    const { pathname, query } = parsedUrl\n\n    if (pathname === '/a') {\n      app.render(req, res, '/b', query)\n    } else if (pathname === '/b') {\n      app.render(req, res, '/a', query)\n    } else {\n      handle(req, res, parsedUrl)\n    }\n  }).listen(3000, err => {\n    if (err) throw err\n    console.log('> Ready on http://localhost:3000')\n  })\n})\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next"),"的 API 如下所示"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"next(opts: object)"))),o.a.createElement(r.MDXTag,{name:"p",components:n},"opts 的属性如下:"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"dev")," (",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"boolean"),") 判断 Next.js 应用是否在开发环境 - 默认",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"false")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"dir")," (",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"string"),") Next 项目路径 - 默认",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"'.'")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"quiet")," (",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"boolean"),") 是否隐藏包含服务端消息在内的错误信息 - 默认",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"false")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"conf")," (",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"object"),") 与",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"next.config.js"),"的对象相同 - 默认",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"{}"))),o.a.createElement(r.MDXTag,{name:"p",components:n},"生产环境的话，可以更改 package.json 里的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"start"),"脚本为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"NODE_ENV=production node server.js"),"。"),o.a.createElement(r.MDXTag,{name:"h4",components:n},"禁止文件路由"),o.a.createElement(r.MDXTag,{name:"p",components:n},"默认情况，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Next"),"将会把",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/pages"),"下的所有文件匹配路由（如",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/pages/some-file.js")," 渲染为 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"site.com/some-file"),"）"),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你的项目使用自定义路由，那么有可能不同的路由会得到相同的内容，可以优化 SEO 和用户体验。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"禁止路由链接到",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/pages"),"下的文件，只需设置",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"文件如下所示："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  useFileSystemPublicRoutes: false\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"useFileSystemPublicRoutes"),"只禁止服务端的文件路由；但是客户端的还是禁止不了。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你如果想配置客户端路由不能跳转文件路由，可以参考",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#intercepting-popstate"}},"Intercepting ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"popstate")),"。"),o.a.createElement(r.MDXTag,{name:"h4",components:n},"动态前缀"),o.a.createElement(r.MDXTag,{name:"p",components:n},"有时你需要设置动态前缀，可以在请求时设置",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"assetPrefix"),"改变前缀。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"使用方法如下："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const next = require('next')\nconst micro = require('micro')\n\nconst dev = process.env.NODE_ENV !== 'production'\nconst app = next({ dev })\nconst handleNextRequests = app.getRequestHandler()\n\napp.prepare().then(() => {\n  const server = micro((req, res) => {\n    // Add assetPrefix support based on the hostname\n    if (req.headers.host === 'my-app.com') {\n      app.setAssetPrefix('http://cdn.com/myapp')\n    } else {\n      app.setAssetPrefix('')\n    }\n\n    handleNextRequests(req, res)\n  })\n\n  server.listen(port, (err) => {\n    if (err) {\n      throw err\n    }\n\n    console.log(`> Ready on http://localhost:${port}`)\n  })\n})\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"动态导入"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-dynamic-import"},"With Dynamic Import")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"ext.js 支持 JavaScript 的 TC39 提议",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/tc39/proposal-dynamic-import"}},"dynamic import proposal"),"。你可以动态导入 JavaScript 模块（如 React 组件）。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"动态导入相当于把代码分成各个块管理。Next.js 服务端动态导入功能，你可以做很多炫酷事情。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"下面介绍一些动态导入方式："),o.a.createElement(r.MDXTag,{name:"h4",components:n},"1. 基础支持 (同样支持 SSR)"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst DynamicComponent = dynamic(import('../components/hello'))\n\nexport default () =>\n  <div>\n    <Header />\n    <DynamicComponent />\n    <p>HOME PAGE is here!</p>\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"2. 自定义加载组件"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst DynamicComponentWithCustomLoading = dynamic(\n  import('../components/hello2'),\n  {\n    loading: () => <p>...</p>\n  }\n)\n\nexport default () =>\n  <div>\n    <Header />\n    <DynamicComponentWithCustomLoading />\n    <p>HOME PAGE is here!</p>\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"3. 禁止使用 SSR"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst DynamicComponentWithNoSSR = dynamic(import('../components/hello3'), {\n  ssr: false\n})\n\nexport default () =>\n  <div>\n    <Header />\n    <DynamicComponentWithNoSSR />\n    <p>HOME PAGE is here!</p>\n  </div>\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"4. 同时加载多个模块"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import dynamic from 'next/dynamic'\n\nconst HelloBundle = dynamic({\n  modules: () => {\n    const components = {\n      Hello1: import('../components/hello1'),\n      Hello2: import('../components/hello2')\n    }\n\n    return components\n  },\n  render: (props, { Hello1, Hello2 }) =>\n    <div>\n      <h1>\n        {props.title}\n      </h1>\n      <Hello1 />\n      <Hello2 />\n    </div>\n})\n\nexport default () => <HelloBundle title=\"Dynamic Bundle\" />\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"自定义",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h3"},"<App>")),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-app-layout"},"Using `_app.js` for layout"))),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-componentdidcatch"},"Using `_app.js` to override `componentDidCatch`")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"组件来初始化页面。你可以重写它来控制页面初始化，如下面的事："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"当页面变化时保持页面布局"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"当路由变化时保持页面状态"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"componentDidCatch"),"自定义处理错误"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"注入额外数据到页面里 (如 GraphQL 查询)")),o.a.createElement(r.MDXTag,{name:"p",components:n},"重写的话，新建",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"./pages/_app.js"),"文件，重写 App 模块如下所示："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"import App, {Container} from 'next/app'\nimport React from 'react'\n\nexport default class MyApp extends App {\n  static async getInitialProps ({ Component, router, ctx }) {\n    let pageProps = {}\n\n    if (Component.getInitialProps) {\n      pageProps = await Component.getInitialProps(ctx)\n    }\n\n    return {pageProps}\n  }\n\n  render () {\n    const {Component, pageProps} = this.props\n    return <Container>\n      <Component {...pageProps} />\n    </Container>\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"自定义",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"h3"},"<Document>")),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-styled-components"},"Styled components custom document"))),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-amp"},"Google AMP")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"解释"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"在服务端呈现"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"初始化服务端时添加文档标记元素"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"通常实现服务端渲染会使用一些 css-in-js 库，如",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-styled-components"}},"styled-components"),", ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-glamorous"}},"glamorous")," 或 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"with-emotion"}},"emotion"),"。",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/styled-jsx"}},"styled-jsx"),"是 Next.js 自带默认使用的 css-in-js 库")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Next.js"),"会自动定义文档标记，比如，你从来不需要添加",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<html>"),", ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<body>"),"等。如果想自定义文档标记，你可以新建",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"./pages/_document.js"),"，然后扩展",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Document"),"类："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"// _document is only rendered on the server side and not on the client side\n// Event handlers like onClick can't be added to this file\n\n// ./pages/_document.js\nimport Document, { Head, Main, NextScript } from 'next/document'\n\nexport default class MyDocument extends Document {\n  static async getInitialProps(ctx) {\n    const initialProps = await Document.getInitialProps(ctx)\n    return { ...initialProps }\n  }\n\n  render() {\n    return (\n      <html>\n        <Head>\n          <style>{`body { margin: 0 } /* custom! */`}</style>\n        </Head>\n        <body className=\"custom_class\">\n          <Main />\n          <NextScript />\n        </body>\n      </html>\n    )\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"钩子",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#fetching-data-and-component-lifecycle"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"getInitialProps")),"接收到的参数",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"ctx"),"对象都是一样的"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"回调函数",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"renderPage"),"是会执行 React 渲染逻辑的函数(同步)，这种做法有助于此函数支持一些类似于 Aphrodite 的 renderStatic 等一些服务器端渲染容器。")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"p"},"注意：",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"strong"},"<Main />"),"外的 React 组件将不会渲染到浏览器中，所以那添加应用逻辑代码。如果你页面需要公共组件（菜单或工具栏），可以参照上面说的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"strong"},"App"),"组件代替。")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"自定义错误处理"),o.a.createElement(r.MDXTag,{name:"p",components:n},"404和500错误客户端和服务端都会通过",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"error.js"),"组件处理。如果你想改写它，则新建",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"_error.js"),"在文件夹中："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\n\nexport default class Error extends React.Component {\n  static getInitialProps({ res, err }) {\n    const statusCode = res ? res.statusCode : err ? err.statusCode : null;\n    return { statusCode }\n  }\n\n  render() {\n    return (\n      <p>\n        {this.props.statusCode\n          ? `An error ${this.props.statusCode} occurred on server`\n          : 'An error occurred on client'}\n      </p>\n    )\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"渲染内置错误页面"),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你想渲染内置错误页面，你可以使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/error"),"："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-jsx"]}},"import React from 'react'\nimport Error from 'next/error'\nimport fetch from 'isomorphic-unfetch'\n\nexport default class Page extends React.Component {\n  static async getInitialProps() {\n    const res = await fetch('https://api.github.com/repos/zeit/next.js')\n    const statusCode = res.statusCode > 200 ? res.statusCode : false\n    const json = await res.json()\n\n    return { statusCode, stars: json.stargazers_count }\n  }\n\n  render() {\n    if (this.props.statusCode) {\n      return <Error statusCode={this.props.statusCode} />\n    }\n\n    return (\n      <div>\n        Next stars: {this.props.stars}\n      </div>\n    )\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"如果你自定义了个错误页面，你可以引入自己的错误页面来代替",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/error"))),o.a.createElement(r.MDXTag,{name:"h3",components:n},"自定义配置"),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你想自定义 Next.js 的高级配置，可以在根目录下新建",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"文件（与",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"pages/")," 和 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"package.json"),"一起）"),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意：",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"是一个 Node.js 模块，不是一个 JSON 文件，可以用于 Next 启动服务已经构建阶段，但是不作用于浏览器端。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  /* config options here */\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"或使用一个函数："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"module.exports = (phase, {defaultConfig}) => {\n  //\n  // https://github.com/zeit/\n  return {\n    /* config options here */\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"phase"),"是配置文件被加载时的当前内容。你可看到所有的 phases 常量：",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"./lib/constants.js"}},"constants"),"这些常量可以通过",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/constants"),"引入："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const {PHASE_DEVELOPMENT_SERVER} = require('next/constants')\nmodule.exports = (phase, {defaultConfig}) => {\n  if(phase === PHASE_DEVELOPMENT_SERVER) {\n    return {\n      /* development only config options here */\n    }\n  }\n\n  return {\n    /* config options for all phases except development here */\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"设置自定义构建目录"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你可以自定义一个构建目录，如新建",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"build"),"文件夹来代替",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".next")," 文件夹成为构建目录。如果没有配置构建目录，构建时将会自动新建",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".next"),"文件夹"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  distDir: 'build'\n}\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"禁止 etag 生成"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你可以禁止 etag 生成根据你的缓存策略。如果没有配置，Next 将会生成 etags 到每个页面中。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  generateEtags: false\n}\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"配置 onDemandEntries"),o.a.createElement(r.MDXTag,{name:"p",components:n},"Next 暴露一些选项来给你控制服务器部署以及缓存页面："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"module.exports = {\n  onDemandEntries: {\n    // period (in ms) where the server will keep pages in the buffer\n    maxInactiveAge: 25 * 1000,\n    // number of pages that should be kept simultaneously without being disposed\n    pagesBufferLength: 2,\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"这个只是在开发环境才有的功能。如果你在生成环境中想缓存 SSR 页面，请查看",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/canary/examples/ssr-caching"}},"SSR-caching")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"配置页面后缀名解析扩展"),o.a.createElement(r.MDXTag,{name:"p",components:n},"如 typescript 模块",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-typescript"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"@zeit/next-typescript")),"，需要支持解析后缀名为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".ts"),"的文件。",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"pageExtensions")," 允许你扩展后缀名来解析各种 pages 下的文件。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  pageExtensions: ['jsx', 'js']\n}\n")),o.a.createElement(r.MDXTag,{name:"h4",components:n},"配置构建 ID"),o.a.createElement(r.MDXTag,{name:"p",components:n},"Next.js 使用构建时生成的常量来标识你的应用服务是哪个版本。在每台服务器上运行构建命令时，可能会导致多服务器部署出现问题。为了保持同一个构建 ID，可以配置",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"generateBuildId"),"函数："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-es6"]}},"// next.config.js\nmodule.exports = {\n  generateBuildId: async () => {\n    // For example get the latest git commit hash here\n    return 'my-build-id'\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"自定义 webpack 配置"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-webpack-bundle-analyzer"},"Custom webpack bundle analyzer")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"可以使用些一些常见的模块"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-css"}},"@zeit/next-css")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-sass"}},"@zeit/next-sass")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-less"}},"@zeit/next-less")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-preact"}},"@zeit/next-preact")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-typescript"}},"@zeit/next-typescript"))),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"em",components:n,parentName:"p"},"注意： ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"em"},"webpack"),"方法将被执行两次，一次在服务端一次在客户端。你可以用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"em"},"isServer"),"属性区分客户端和服务端来配置")),o.a.createElement(r.MDXTag,{name:"p",components:n},"多配置可以组合在一起，如："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const withTypescript = require('@zeit/next-typescript')\nconst withSass = require('@zeit/next-sass')\n\nmodule.exports = withTypescript(withSass({\n  webpack(config, options) {\n    // Further custom configuration here\n    return config\n  }\n}))\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"为了扩展",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"webpack"),"使用，可以在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"定义函数。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js is not transformed by Babel. So you can only use javascript features supported by your version of Node.js.\n\nmodule.exports = {\n  webpack: (config, { buildId, dev, isServer, defaultLoaders }) => {\n    // Perform customizations to webpack config\n    // Important: return the modified config\n    return config\n  },\n  webpackDevMiddleware: config => {\n    // Perform customizations to webpack dev middleware config\n    // Important: return the modified config\n    return config\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"webpack"),"的第二个参数是个对象，你可以自定义配置它，对象属性如下所示："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"buildId")," - 字符串类型，构建的唯一标示"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"dev")," - ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"Boolean"),"型，判断你是否在开发环境下"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"isServer")," - ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"Boolean")," 型，为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"true"),"使用在服务端, 为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"false"),"使用在客户端."),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"li"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"defaultLoaders")," - 对象型 ，内部加载器, 你可以如下配置"),o.a.createElement(r.MDXTag,{name:"ul",components:n,parentName:"li"},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"babel")," - 对象型，配置",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"babel-loader"),"."),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"hotSelfAccept")," - 对象型， ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"hot-self-accept-loader"),"配置选项.这个加载器只能用于高阶案例。如 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next-plugins/tree/master/packages/next-typescript"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"@zeit/next-typescript")),"添加顶层 typescript 页面。")))),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"defaultLoaders.babel"),"使用案例如下："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// Example next.config.js for adding a loader that depends on babel-loader\n// This source was taken from the @zeit/next-mdx plugin source:\n// https://github.com/zeit/next-plugins/blob/master/packages/next-mdx\nmodule.exports = {\n  webpack: (config, {}) => {\n    config.module.rules.push({\n      test: /.mdx/,\n      use: [\n        options.defaultLoaders.babel,\n        {\n          loader: '@mdx-js/loader',\n          options: pluginOptions.options\n        }\n      ]\n    })\n\n    return config\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"自定义 babel 配置"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-custom-babel-config"},"Custom babel configuration")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"为了扩展方便我们使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"babel"),"，可以在应用根目录新建",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".babelrc"),"文件，该文件可配置。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果有该文件，我们将会考虑数据源，因此也需要定义 next 项目需要的东西，也就是 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/babel"),"预设。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"这种设计方案将会使你不诧异于我们可以定制 babel 配置。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"下面是",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".babelrc"),"文件案例："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "presets": ["next/babel"],\n  "plugins": []\n}\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/babel"),"预设可处理各种 React 应用所需要的情况。包括："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"preset-env"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"preset-react"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"plugin-proposal-class-properties"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"plugin-proposal-object-rest-spread"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"plugin-transform-runtime"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"styled-jsx")),o.a.createElement(r.MDXTag,{name:"p",components:n},"presets / plugins 不允许添加到",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".babelrc"),"中，然而你可以配置",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/babel"),"预设："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "presets": [\n    ["next/babel", {\n      "preset-env": {},\n      "transform-runtime": {},\n      "styled-jsx": {},\n      "class-properties": {}\n    }]\n  ],\n  "plugins": []\n}\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},'"preset-env"'),"模块选项应该保持为 false，否则 webpack 代码分割将被禁用。"),o.a.createElement(r.MDXTag,{name:"h3",components:n},"暴露配置到服务端和客户端"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next/config"),"模块使你应用运行时可以读取些存储在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"的配置项。",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"serverRuntimeConfig"),"属性只在服务器端可用，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"publicRuntimeConfig"),"属性在服务端和客户端可用。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  serverRuntimeConfig: { // Will only be available on the server side\n    mySecret: 'secret'\n  },\n  publicRuntimeConfig: { // Will be available on both server and client\n    staticFolder: '/static',\n    mySecret: process.env.MY_SECRET // Pass through env variables\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// pages/index.js\nimport getConfig from 'next/config'\n// Only holds serverRuntimeConfig and publicRuntimeConfig from next.config.js nothing else.\nconst {serverRuntimeConfig, publicRuntimeConfig} = getConfig()\n\nconsole.log(serverRuntimeConfig.mySecret) // Will only be available on the server side\nconsole.log(publicRuntimeConfig.staticFolder) // Will be available on both server and client\n\nexport default () => <div>\n  <img src={`${publicRuntimeConfig.staticFolder}/logo.png`} alt=\"logo\" />\n</div>\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"启动服务选择 hostname"),o.a.createElement(r.MDXTag,{name:"p",components:n},"启动开发环境服务可以设置不同的 hostname，你可以在启动命令后面加上",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"--hostname 主机名")," 或 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"-H 主机名"),"。它将会启动一个 TCP 服务器来监听连接所提供的主机。"),o.a.createElement(r.MDXTag,{name:"h3",components:n},"CDN 支持前缀"),o.a.createElement(r.MDXTag,{name:"p",components:n},"建立一个 CDN，你能配置",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"assetPrefix"),"选项，去配置你的 CDN 源。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"const isProd = process.env.NODE_ENV === 'production'\nmodule.exports = {\n  // You may only need to add assetPrefix in the production.\n  assetPrefix: isProd ? 'https://cdn.mydomain.com' : ''\n}\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意：Next.js 运行时将会自动添加前缀，但是对于",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/static"),"是没有效果的，如果你想这些静态资源也能使用 CDN，你需要自己添加前缀。有一个方法可以判断你的环境来加前缀，如 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/master/examples/with-universal-configuration"}},"in this example"),"。"),o.a.createElement(r.MDXTag,{name:"h2",components:n},"项目部署"),o.a.createElement(r.MDXTag,{name:"p",components:n},"部署中，你可以先构建打包生成环境代码，再启动服务。因此，构建和启动分为下面两条命令："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-bash"]}},"next build\nnext start\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"例如，使用",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/now"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"now")),"去部署",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"package.json"),"配置文件如下："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "name": "my-app",\n  "dependencies": {\n    "next": "latest"\n  },\n  "scripts": {\n    "dev": "next",\n    "build": "next build",\n    "start": "next start"\n  }\n}\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"然后就可以直接运行",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"now"),"了。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"Next.js 也有其他托管解决方案。请查考 wiki 章节",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/wiki/Deployment"}},"'Deployment'")," 。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意：",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"NODE_ENV"),"可以通过",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next"),"命令配置，如果没有配置，会最大渲染，如果你使用编程式写法的话",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#custom-server-and-routing"}},"programmatically"),"，你需要手动设置",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"NODE_ENV=production"),"。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"注意：推荐将",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".next"),"或自定义打包文件夹",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js#custom-configuration"}},"custom dist folder"),"放入",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".gitignore")," 或 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".npmignore"),"中。否则，使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"files")," 或 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"now.files"),"添加部署白名单，并排除",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".next"),"或自定义打包文件夹。"),o.a.createElement(r.MDXTag,{name:"h2",components:n},"浏览器支持"),o.a.createElement(r.MDXTag,{name:"p",components:n},"Next.js 支持 IE11 和所有的现代浏览器使用了",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://new.babeljs.io/docs/en/next/babel-preset-env.html"}},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"a"},"@babel/preset-env")),"。为了支持 IE11，Next.js 需要全局添加",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Promise"),"的 polyfill。有时你的代码或引入的其他 NPM 包的部分功能现代浏览器不支持，则需要用 polyfills 去实现。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"ployflls 实现案例为",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/canary/examples/with-polyfills"}},"polyfills"),"。"),o.a.createElement(r.MDXTag,{name:"h2",components:n},"导出静态页面"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-static-export"},"Static export")))),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next export"),"可以输出一个 Next.js 应用作为静态资源应用而不依靠 Node.js 服务。 这个输出的应用几乎支持 Next.js 的所有功能，包括动态路由，预获取，预加载以及动态导入。"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next export"),"将把所有有可能渲染出的 HTML 都生成。这是基于映射对象的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"pathname"),"关键字关联到页面对象。这个映射叫做",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"exportPathMap"),"。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"页面对象有2个属性:"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"page")," - 字符串类型，页面生成目录"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"query")," - 对象类型，当预渲染时，",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"query"),"对象将会传入页面的生命周期",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"getInitialProps"),"中。默认为",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"{}"),"。")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"使用"),o.a.createElement(r.MDXTag,{name:"p",components:n},"通常开发 Next.js 应用你将会运行："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre"},"next build\nnext export\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next export"),"命令默认不需要任何配置，将会自动生成默认",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"exportPathMap"),"生成",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"pages"),"目录下的路由你页面。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你想动态配置路由，可以在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next.config.js"),"中添加异步函数",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"exportPathMap"),"。"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-js"]}},"// next.config.js\nmodule.exports = {\n  exportPathMap: async function (defaultPathMap) {\n    return {\n      '/': { page: '/' },\n      '/about': { page: '/about' },\n      '/readme.md': { page: '/readme' },\n      '/p/hello-nextjs': { page: '/post', query: { title: 'hello-nextjs' } },\n      '/p/learn-nextjs': { page: '/post', query: { title: 'learn-nextjs' } },\n      '/p/deploy-nextjs': { page: '/post', query: { title: 'deploy-nextjs' } }\n    }\n  }\n}\n")),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"注意：如果 path 的结尾是目录名，则将导出",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/dir-name/index.html"),"，但是如果结尾有扩展名，将会导出对应的文件，如上",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"/readme.md"),"。如果你使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},".html"),"以外的扩展名解析文件时，你需要设置 header 的",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Content-Type"),'头为"text/html".')),o.a.createElement(r.MDXTag,{name:"p",components:n},"输入下面命令："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-sh"]}},"next build\nnext export\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"你可以在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"package.json"),"添加一个 NPM 脚本，如下所示："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "scripts": {\n    "build": "next build",\n    "export": "npm run build && next export"\n  }\n}\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"接着只用执行一次下面命令："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-sh"]}},"npm run export\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"然后你将会有一个静态页面应用在",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"out")," 目录下。"),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"你也可以自定义输出目录。可以运行",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next export -h"),"命令查看帮助。")),o.a.createElement(r.MDXTag,{name:"p",components:n},"现在你可以部署",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"out"),"目录到任意静态资源服务器上。注意如果部署 GitHub Pages 需要加个额外的步骤，",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/wiki/Deploying-a-Next.js-app-into-GitHub-Pages"}},"文档如下")),o.a.createElement(r.MDXTag,{name:"p",components:n},"例如，访问",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"out"),"目录并用下面命令部署应用",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/now"}},"ZEIT Now"),"."),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-sh"]}},"now\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"限制"),o.a.createElement(r.MDXTag,{name:"p",components:n},"使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next export"),"，我们创建了个静态 HTML 应用。构建时将会运行页面里生命周期",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps")," 函数。"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"req"),"和",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"res"),"只在服务端可用，不能通过",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"。"),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"所以你不能预构建 HTML 文件时动态渲染 HTML 页面。如果你想动态渲染可以运行",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"next start"),"或其他自定义服务端 API。")),o.a.createElement(r.MDXTag,{name:"h2",components:n},"多 zone"),o.a.createElement("p",null,o.a.createElement("summary",null,o.a.createElement("b",null,"Examples")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-zones"},"With Zones")))),o.a.createElement(r.MDXTag,{name:"p",components:n},"一个 zone 时一个单独的 Next.js 应用。如果你有很多 zone，你可以合并成一个应用。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"例如，你如下有两个 zone："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://docs.my-app.com"}},"https://docs.my-app.com")," 服务于路由 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"/docs/**")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://ui.my-app.com"}},"https://ui.my-app.com")," 服务于所有页面")),o.a.createElement(r.MDXTag,{name:"p",components:n},"有多 zone 应用技术支持，你可以将几个应用合并到一个，而且可以自定义 URL 路径，使你能同时单独开发各个应用。"),o.a.createElement(r.MDXTag,{name:"blockquote",components:n},o.a.createElement(r.MDXTag,{name:"p",components:n,parentName:"blockquote"},"与 microservices 观念类似, 只是应用于前端应用.")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"怎么定义一个 zone"),o.a.createElement(r.MDXTag,{name:"p",components:n},"zone 没有单独的 API 文档。你需要做下面事即可："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"确保你的应用里只有需要的页面 (例如, ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://ui.my-app.com"}},"https://ui.my-app.com")," 不包含 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"/docs/**"),")"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"确保你的应用有个前缀",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next.js#cdn-support-with-asset-prefix"}},"assetPrefix"),"。（你也可以定义动态前缀",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/zeit/next.js#dynamic-assetprefix"}},"dynamically"),"）")),o.a.createElement(r.MDXTag,{name:"h3",components:n},"怎么合并他们"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你能使用 HTTP 代理合并 zone"),o.a.createElement(r.MDXTag,{name:"p",components:n},"你能使用代理",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/micro-proxy"}},"micro proxy"),"来作为你的本地代理服务。它允许你定义路由规则如下："),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:["language-json"]}},'{\n  "rules": [\n    {"pathname": "/docs**", "method":["GET", "POST", "OPTIONS"], "dest": "https://docs.my-app.com"},\n    {"pathname": "/**", "dest": "https://ui.my-app.com"}\n  ]\n}\n')),o.a.createElement(r.MDXTag,{name:"p",components:n},"生产环境部署，如果你使用了",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/now"}},"ZEIT now"),"，可以它的使用",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://zeit.co/docs/features/path-aliases"}},"path alias")," 功能。否则，你可以设置你已使用的代理服务编写上面规则来路由 HTML 页面"),o.a.createElement(r.MDXTag,{name:"h2",components:n},"技巧"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://www.raygesualdo.com/posts/301-redirects-with-nextjs/"}},"设置301重定向")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://arunoda.me/blog/ssr-and-server-only-modules"}},"只处理服务器端模块")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/builderbook/builderbook"}},"构建项目 React-Material-UI-Next-Express-Mongoose-Mongodb")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/async-labs/saas"}},"构建一个 SaaS 产品 React-Material-UI-Next-MobX-Express-Mongoose-MongoDB-TypeScript"))),o.a.createElement(r.MDXTag,{name:"h2",components:n},"问答"),o.a.createElement("summary",null,"这个产品可以用于生产环境吗？"),"https://zeit.co 都是一直用 Next.js 写的。",o.a.createElement(r.MDXTag,{name:"p",components:n},"  它的开发体验和终端用户体验都很好，所以我们决定开源出来给大家共享。"),o.a.createElement("summary",null,"体积多大？"),o.a.createElement(r.MDXTag,{name:"p",components:n},"客户端大小根据应用需求不一样大小也不一样。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"一个最简单 Next 应该用 gzip 压缩后大约65kb"),o.a.createElement("summary",null,"这个像 `create-react-app`?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"是或不是."),o.a.createElement(r.MDXTag,{name:"p",components:n},"是，因为它让你的 SSR 开发更简单。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"不是，因为它规定了一定的目录结构，使我们能做以下更高级的事："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"服务端渲染"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"自动代码分割")),o.a.createElement(r.MDXTag,{name:"p",components:n},"此外，Next.js 还提供两个内置特性："),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"路由与懒加载组件: ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"<Link>")," (通过引入 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"next/link"),")"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"修改",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"<head>"),"的组件: ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"<Head>")," (通过引入 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"next/head"),")")),o.a.createElement(r.MDXTag,{name:"p",components:n},"如果你想写共用组件，可以嵌入 Next.js 应用和 React 应用中，推荐使用",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"create-react-app"),"。你可以更改",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"import"),"保持代码清晰。"),o.a.createElement("summary",null,"怎么解决 CSS 嵌入 JS 问题?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"Next.js 自带",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/styled-jsx"}},"styled-jsx"),"库支持 CSS 嵌入 JS。而且你可以选择其他嵌入方法到你的项目中，可参考文档",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#css-in-js"}},"as mentioned before"),"。"),o.a.createElement("summary",null,"哪些语法会被转换？怎么转换它们？"),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们遵循 V8 引擎的，如今 V8 引擎广泛支持 ES6 语法以及",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"async"),"和",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"await"),"语法，所以我们支持转换它们。但是 V8 引擎不支持修饰器语法，所以我们也不支持转换这语法。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"可以参照",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/blob/master/server/build/webpack.js#L79"}},"这些")," 以及 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/issues/26"}},"这些")),o.a.createElement("summary",null,"为什么使用新路由?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"Next.js 的特别之处如下所示:"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"路由不需要被提前知道"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"路由总是被懒加载"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"顶层组件可以定义生命周期",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"getInitialProps"),"来阻止路由加载（当服务端渲染或路由懒加载时）")),o.a.createElement(r.MDXTag,{name:"p",components:n},"因此,我们可以介绍一个非常简单的路由方法,它由下面两部分组成:"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"每个顶层组件都将会收到一个",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"url"),"对象，来检查 url 或修改历史记录"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"<Link />"),"组件用于包装如(",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"li"},"<a/>"),")标签的元素容器，来执行客户端转换。")),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们使用了些有趣的场景来测试路由的灵活性，例如，可查看",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/nextgram"}},"nextgram"),"。"),o.a.createElement("summary",null,"我怎么定义自定义路由?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们通过请求处理来",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"#custom-server-and-routing"}},"添加"),"任意 URL 与任意组件之前的映射关系。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"在客户端，我们",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"<Link>"),"组件有个属性",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"as"),"，可以装饰改变获取到的 URL。"),o.a.createElement("summary",null,"怎么获取数据?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"这由你决定。",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"getInitialProps"),"是一个异步函数",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"async"),"（也就是函数将会返回个",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"Promise"),"）。你可以在任意位置获取数据。"),o.a.createElement("summary",null,"我可以使用 GraphQL 吗?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"是的! 这里有个例子",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-apollo"}},"Apollo"),"."),o.a.createElement("summary",null,"我可以使用 Redux 吗?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"是的! 这里有个",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples/with-redux"}},"例子")),o.a.createElement("summary",null,"我可以在 Next 应用中使用我喜欢的 Javascript 库或工具包吗?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"从我们第一次发版就已经提供",o.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"p"},"很多"),"例子，你可以查看这些",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/zeit/next.js/tree/7.0.0-canary.8/examples"}},"例子"),"。"),o.a.createElement("summary",null,"什么启发我们做这个?"),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们实现的大部分目标都是通过 Guillermo Rauch 的",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"http://rauchg.com/2014/7-principles-of-rich-web-applications/"}},"Web 应用的7原则"),"来启发出的。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"PHP 的易用性也是个很好的灵感来源，我们觉得 Next.js 可以替代很多需要用 PHP 输出 HTML 的场景。"),o.a.createElement(r.MDXTag,{name:"p",components:n},"与 PHP 不同的是，我们得利于 ES6 模块系统，每个文件会输出一个",o.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"p"},"组件或方法"),"，以便可以轻松的导入用于懒加载和测试"),o.a.createElement(r.MDXTag,{name:"p",components:n},"我们研究 React 的服务器渲染时并没有花费很大的步骤，因为我们发现一个类似于 Next.js 的产品，React 作者 Jordan Walke 写的",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://github.com/facebookarchive/react-page"}},"react-page")," (现在已经废弃)"),o.a.createElement(r.MDXTag,{name:"h2",components:n},"贡献"),o.a.createElement(r.MDXTag,{name:"p",components:n},"可查看 ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"./contributing.md"}},"contributing.md")),o.a.createElement(r.MDXTag,{name:"h2",components:n},"讨论"),o.a.createElement(r.MDXTag,{name:"ul",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"(",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://raoenhui.github.io/nextjs/2018/08/31/Nextjs%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3"}},"@前端妹子blog"),")"),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},"(",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://github.com/raoenhui/raoenhui.github.io/issues/18"}},"@github issue"),")")))},p=t(1),l=t.n(p),s=t(82),i=t.n(s),g=t(16),u=t.n(g),d=t(75),E=t(83),h=t.n(E);var f=function(e){var n=e.children,t=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(a=0;a<m.length;a++)t=m[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["children"]);return o.a.createElement(h.a,null,o.a.createElement("title",null,"".concat(t.title," - Next.js Documentation")),o.a.createElement("meta",{name:"twitter:card",content:t.image?"summary_large_image":"summary"}),o.a.createElement("meta",{name:"twitter:site",content:"@zeithq"}),o.a.createElement("meta",{name:"og:title",content:t.ogTitle||t.title}),t.description?o.a.createElement("meta",{name:"description",content:t.description}):null,t.ogDescription?o.a.createElement("meta",{name:"og:description",content:t.ogDescription}):o.a.createElement("meta",{name:"og:description",content:t.description}),t.video?[o.a.createElement("meta",{name:"og:type",content:"video",key:"0"}),o.a.createElement("meta",{name:"og:video",content:t.video,key:"1"}),o.a.createElement("meta",{name:"og:video:type",content:"video/mp4",key:"2"})]:null,n)},T=function(e){return e.href.startsWith("/")&&!e.href.startsWith("/docs")?o.a.createElement(M,e):e.href.includes("@")||e.href.startsWith("#")?o.a.createElement(D,e):o.a.createElement(X,e)},M=function(e){var n=e.href,t=e.as,a=e.children,r=e.error,m=void 0!==r&&r;return o.a.createElement(u.a,{prefetch:!0,href:n,as:t},o.a.createElement("a",{className:l.a.dynamic([["3905228585",[m?"underline":"none",m?"red":"#3333FF"]]])},a,o.a.createElement(l.a,{styleId:"3905228585",css:["a.__jsx-style-dynamic-selector{-webkit-text-decoration:".concat(m?"underline":"none",";text-decoration:").concat(m?"underline":"none",";color:").concat(m?"red":"#3333FF",";font-size:inherit;}"),"a.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:underline;text-decoration:underline;}"],dynamic:[m?"underline":"none",m?"red":"#3333FF"]})))},D=function(e){var n=e.href,t=e.onClick,a=e.children;return o.a.createElement("a",{href:n,onClick:t,className:"jsx-3433991402"},a,o.a.createElement(l.a,{styleId:"3433991402",css:["a.jsx-3433991402{-webkit-text-decoration:none;text-decoration:none;color:#3333FF;font-size:inherit;}","a.jsx-3433991402:hover{-webkit-text-decoration:underline;text-decoration:underline;}"]}))},X=function(e){var n=e.href,t=e.children;return o.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"jsx-3433991402"},t,o.a.createElement(l.a,{styleId:"3433991402",css:["a.jsx-3433991402{-webkit-text-decoration:none;text-decoration:none;color:#3333FF;font-size:inherit;}","a.jsx-3433991402:hover{-webkit-text-decoration:underline;text-decoration:underline;}"]}))},N=t(84);function x(){return o.a.createElement("header",{className:"jsx-3417251989"},o.a.createElement(T,{href:"/"},o.a.createElement("a",{className:"jsx-3417251989 logo"},o.a.createElement(N.a,null))),o.a.createElement(l.a,{styleId:"3417251989",css:["header.jsx-3417251989{position:fixed;z-index:1000;top:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:144px;padding:0 56px;}",".logo.jsx-3417251989 svg{height:50px;}","@media only screen and (max-width:912px){header.jsx-3417251989{position:relative;}}"]}))}var b=t(267),y=t.n(b),C=this&&this.__assign||Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},v=function(e,n){var t=n.scrollLeft,a=n.scrollTop;e.scrollLeft=t,e.scrollTop=a};var j=this&&this.__assign||Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},w=function(e,n,t){var a=n.scrollLeft,o=n.scrollTop;t.duration?y()(e,{scrollLeft:a,scrollTop:o},{duration:t.duration,easing:t.easing}):(e.scrollLeft=a,e.scrollTop=o)};function k(e,n,t,a,o){if(void 0===o&&(o={}),!(e&&e instanceof HTMLElement))throw new Error("Element is required in scrollIntoViewIfNeeded");var r={centerIfNeeded:!1,handleScroll:w};!function(e){return"boolean"==typeof e}(n)?r=j({},r,n):r.centerIfNeeded=n;var m={top:0,right:0,bottom:0,left:0};return r.offset=r.offset?j({},m,r.offset):m,t&&(r.duration=t.duration,r.easing=t.easing),a&&(r.boundary=a),o.offsetTop&&(r.offset.top=o.offsetTop),o.offsetRight&&(r.offset.right=o.offsetRight),o.offsetBottom&&(r.offset.bottom=o.offsetBottom),o.offsetLeft&&(r.offset.left=o.offsetLeft),function(e,n){if(!(e&&e instanceof HTMLElement))throw new Error("Element is required in scrollIntoViewIfNeeded");var t=C({handleScroll:v},n),a={top:0,right:0,bottom:0,left:0};function o(e,n,a,o){return!1===t.centerIfNeeded||a<=e+o&&e<=n+o?Math.min(a,Math.max(n,e)):(n+a)/2}t.offset=t.offset?C({},a,t.offset):a;for(var r,m=t.offset,c=m.top,p=m.left,l=m.bottom,s=m.right,i=function e(n,t,a,o){return{left:n+p,top:t+c,width:a,height:o,right:n+p+a+s,bottom:t+c+o+l,translate:function(r,m){return e(r+n+p,m+t+c,a,o)},relativeFromTo:function(r,m){var l=n+p,s=t+c;if((r=r.offsetParent)===(m=m.offsetParent))return i;for(;r;r=r.offsetParent)l+=r.offsetLeft+r.clientLeft,s+=r.offsetTop+r.clientTop;for(;m;m=m.offsetParent)l-=m.offsetLeft+m.clientLeft,s-=m.offsetTop+m.clientTop;return e(l,s,a,o)}}}(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);(r=e.parentNode)instanceof HTMLElement&&e!==t.boundary;){var g=r.offsetLeft+r.clientLeft,u=r.offsetTop+r.clientTop;i=i.relativeFromTo(e,r).translate(-g,-u);var d=o(r.scrollLeft,i.right-r.clientWidth,i.left,r.clientWidth),E=o(r.scrollTop,i.bottom-r.clientHeight,i.top,r.clientHeight);t.handleScroll(r,{scrollLeft:d,scrollTop:E},t),i=i.translate(g-r.scrollLeft,u-r.scrollTop),e=r}}(e,r)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function I(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function R(e,n,t){return n&&I(e.prototype,n),t&&I(e,t),e}function P(e,n){return!n||"object"!==_(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function O(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var L=["安装","代码自动分割","CSS","静态文件服务（如图像）","生成<Head>","获取数据以及组件生命周期","路由","预加载页面","自定义服务端路由","动态导入","自定义<App>","自定义<Document>","自定义错误处理","渲染内置错误页面","自定义配置","自定义-webpack-配置","自定义-babel-配置","项目部署","浏览器支持","导出静态页面","使用","多-zone","技巧","问答","贡献"],z=function(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[?!]/g,"")};function q(e,n,t,a){return k(e,n,t,function e(n){var t=n.parentNode;if(!t)return null;return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth?t:e(t)}(e),a)}var A=function(e){function n(){var e;return S(this,n),(e=P(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))).activeNavItem=null,e}return O(n,a["Component"]),R(n,[{key:"componentDidMount",value:function(){this.scrollIntoViewIfNeeded()}},{key:"shouldComponentUpdate",value:function(e,n){return this.props.isActive!==e.isActive}},{key:"componentDidUpdate",value:function(){this.scrollIntoViewIfNeeded()}},{key:"scrollIntoViewIfNeeded",value:function(){this.props.isActive&&(this.activeNavItem.scrollIntoViewIfNeeded?this.activeNavItem.scrollIntoViewIfNeeded():q(this.activeNavItem))}},{key:"render",value:function(){var e=this,n=this.props,t=n.item,a=n.updateSelected,r=n.isActive;return o.a.createElement("a",{href:"#".concat(z(t)),onClick:a,ref:function(n){return e.activeNavItem=n},className:"jsx-372674438 "+((r?"active":"")||"")},t,o.a.createElement(l.a,{styleId:"372674438",css:["a.jsx-372674438{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.4rem;color:#000000;-webkit-text-decoration:none;text-decoration:none;margin-left:-56px;padding:6px 0;padding-left:56px;position:relative;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}","a.active.jsx-372674438{font-weight:500;}","a.jsx-372674438:after{content:'';position:absolute;left:0;top:0;width:4px;height:100%;-webkit-transition:border-width 0.2s ease;transition:border-width 0.2s ease;}","a.active.jsx-372674438:after{border-left:4px solid #000;padding-left:52px;}","a.jsx-372674438:not(.active):hover:after{border-left:4px solid #DDDDDD;padding-left:52px;}"]}))}}]),n}(),H=function(e){function n(){return S(this,n),P(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return O(n,o.a.Component),R(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"jsx-141781163 documentation__sidebar"},o.a.createElement("nav",{className:"jsx-141781163"},o.a.createElement("span",{className:"jsx-141781163 documentation__sidebar-heading"},"Getting Started"),L.map(function(n,t){return o.a.createElement(A,{key:t,item:n,updateSelected:function(){return e.props.updateSelected("#".concat(z(n)))},isActive:e.props.currentSelection==="#".concat(z(n))})})),o.a.createElement(l.a,{styleId:"141781163",css:[".documentation__sidebar.jsx-141781163{width:312px;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;position:relative;padding-right:56px;}",".documentation__sidebar.jsx-141781163 nav.jsx-141781163{position:fixed;overflow-y:scroll;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:256px;height:calc(100vh - 144px);padding:6px 0 56px 56px;}",".documentation__sidebar-heading.jsx-141781163{color:#999999;text-transform:uppercase;font-size:1.2rem;margin-bottom:12px;}",".documentation__sidebar.jsx-141781163 nav.jsx-141781163 a.active.jsx-141781163{font-weight:600;}","@media only screen and (max-width:912px){.documentation__sidebar.jsx-141781163{display:none;}}"]}))}}]),n}();function U(){return(U=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function F(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(a=0;a<m.length;a++)t=m[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var W=function(e){var n=e.children,t=F(e,["children"]);return o.a.createElement("h1",U({},t,{className:"jsx-2234459629 "+(null!=t.className&&t.className||"")}),n,o.a.createElement(l.a,{styleId:"2234459629",css:[".jsx-2234459629{font-size:2.6rem;font-weight:400;margin-top:0;}"]}))},B=function(e){var n=e.children,t=F(e,["children"]);return o.a.createElement("h2",U({},t,{className:"jsx-3557574343 "+(null!=t.className&&t.className||"")}),n,o.a.createElement(l.a,{styleId:"3557574343",css:[".jsx-3557574343{font-size:2.4rem;font-weight:500;}"]}))},V=function(e){var n=e.children,t=F(e,["children"]);return o.a.createElement("h3",U({},t,{className:"jsx-2439276997 "+(null!=t.className&&t.className||"")}),n,o.a.createElement(l.a,{styleId:"2439276997",css:[".jsx-2439276997{font-size:2rem;font-weight:600;}"]}))};function G(){return(G=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var J=function(){return o.a.createElement("svg",{width:"11px",height:"11px",viewBox:"0 0 11 11",version:"1.1"},o.a.createElement("path",{d:"M10.37 3.674L8.542 5.5a2.142 2.142 0 0 1-1.819.602l1.21-1.21 1.827-1.827A1.292 1.292 0 0 0 7.935 1.24L6.109 3.065l-1.211 1.21A2.142 2.142 0 0 1 5.5 2.458L7.326.63a2.15 2.15 0 1 1 3.043 3.043zM6.716 4.892L4.891 6.718l-.609-.61L6.11 4.284l.608.609zM1.24 7.935A1.291 1.291 0 0 0 3.065 9.76l1.826-1.826 1.21-1.21A2.141 2.141 0 0 1 5.5 8.542L3.674 10.37A2.151 2.151 0 1 1 .63 7.326L2.457 5.5a2.141 2.141 0 0 1 1.819-.602l-1.21 1.21-1.827 1.827z",fill:"#9B9B9B",fillRule:"evenodd"}))};function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Q(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Y(e,n){return!n||"object"!==Z(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}var K=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),Y(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}var t,a,r;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.a.Component),t=n,(a=[{key:"render",value:function(){var e=this.props,n=e.component,t=e.className,a=e.children,r=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(a=0;a<m.length;a++)t=m[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["component","className","children"]);return o.a.cloneElement(n,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){$(e,n,t[n])})}return e}({className:[t,n.props.className||""].join(" ")},r),a)}}])&&Q(t.prototype,a),r&&Q(t,r),n}(),ee=function(e){var n=e.offsetTop,t=e.children,a=t.props.children||"",r=e.id,m=a;null==r&&(Array.isArray(a)&&(m=a.map(function(e){return"object"===Z(e)?e.props.children:e}).join("")),r=m.toLowerCase().replace(/\s/g,"-").replace(/[?!]/g,""));var c=null!=n?{marginTop:-n+"px",paddingTop:n+"px"}:null;return o.a.createElement(K,{className:e.lean?"lean":"",component:t,"data-components-heading":!0},o.a.createElement("span",{id:r,style:c,className:"jsx-573693548 target"}),o.a.createElement("a",{href:"#"+r,className:"jsx-573693548"},a),o.a.createElement("span",{className:"jsx-573693548 permalink"},o.a.createElement(J,null)),o.a.createElement(l.a,{styleId:"573693548",css:["a.jsx-573693548{border-bottom:1px solid transparent;color:inherit;-webkit-text-decoration:none;text-decoration:none;}","a.jsx-573693548:hover{border-bottom-color:inherit;}","h1[data-components-heading] a.jsx-573693548::before{content:'# ';}","h2[data-components-heading] a.jsx-573693548::before{content:'## ';}","h3[data-components-heading] a.jsx-573693548::before{content:'### ';}",".lean[data-components-heading] a.jsx-573693548::before{content:'';}","h1[data-components-heading]::before,h2[data-components-heading]::before,h3[data-components-heading]::before,h4[data-components-heading]::before{display:none;}",".target.jsx-573693548{display:block;margin-top:-20px;padding-top:20px;visibility:hidden;position:absolute;}",".permalink.jsx-573693548{text-align:center;vertical-align:middle;visibility:hidden;display:none;}","a.jsx-573693548:hover~.permalink.jsx-573693548{visibility:visible;}","@media (min-width:992px){a.jsx-573693548{margin-right:10px;}.permalink.jsx-573693548{display:inline-block;}}"]}))},ne=t(85),te=t.n(ne),ae=t(52),oe=t.n(ae),re=t(86),me=t(87);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function le(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"undefined"!=typeof window&&t(269);var ie=oe()(te.a.start,200);re.a.on("routeChangeStart",ie),re.a.on("routeChangeComplete",function(e){Object(me.a)(e),ie.cancel(),te.a.done()}),re.a.on("routeChangeError",function(){ie.cancel(),te.a.done()});var ge=function(e){function n(e){var t,a,o;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),a=this,o=(n.__proto__||Object.getPrototypeOf(n)).call(this,e),t=!o||"object"!==ce(o)&&"function"!=typeof o?se(a):o,Object.defineProperty(se(t),"updateSelected",{configurable:!0,enumerable:!0,writable:!0,value:function(e){t.setState({currentSelection:e})}}),t.state={currentSelection:null},t.contentNode=null,t.observer=null,t.updateSelected=t.updateSelected.bind(se(t)),t.onHashChange=t.onHashChange.bind(se(t)),t}var t,r,m;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a["Component"]),t=n,(r=[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("hashchange",this.onHashChange);var n=pe(this.contentNode.querySelectorAll("[id]")),t=new Set;this.observer=new IntersectionObserver(function(a){var o=!0,r=!1,m=void 0;try{for(var c,p=a[Symbol.iterator]();!(o=(c=p.next()).done);o=!0){var l=c.value,s=l.isIntersecting,g=l.target;s?t.add(g):t.delete(g)}}catch(e){r=!0,m=e}finally{try{o||null==p.return||p.return()}finally{if(r)throw m}}if(t.size){var u="#"+(pe(t).sort(function(e,t){return n.indexOf(e)-n.indexOf(t)})[0].id||"");location.hash!==u&&(!function(e){var n=i.a.pathname,t=i.a.query,a=Object(d.parse)(location.href);a.hash=e,i.a.router.changeState("replaceState",Object(d.format)({pathname:n,query:t}),Object(d.format)(a))}(u),e.updateSelected(u))}});var a=!0,o=!1,r=void 0;try{for(var m,c=n[Symbol.iterator]();!(a=(m=c.next()).done);a=!0){var p=m.value;this.observer.observe(p)}}catch(e){o=!0,r=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw r}}var l=window.location.hash;this.setState({currentSelection:l})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("hashchange",this.onHashChange),this.observer.disconnect(),this.observer=null}},{key:"onHashChange",value:function(){this.updateSelected(window.location.hash)}},{key:"render",value:function(){var e=this;return o.a.createElement(a.Fragment,null,o.a.createElement(f,{title:"Getting Started"},o.a.createElement("style",{dangerouslySetInnerHTML:{__html:'\n              html {\n                height: 100%;\n                box-sizing: border-box;\n                font-size: 62.5%;\n              }\n\n              *,\n              *:before,\n              *:after {\n                box-sizing: inherit;\n              }\n\n              body {\n                position: relative;\n                min-height: 100%;\n                margin: 0;\n                padding-bottom: 6rem;\n                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;\n                text-rendering: optimizeLegibility;\n                line-height: 1.5;\n                font-size: 1.6rem;\n              }\n\n              a {\n                -webkit-tap-highlight-color: rgba(0,0,0,0);\n              }\n\n              html, body {\n                background-color: #FFF;\n                color: #000;\n              }\n\n              ::selection {\n                background-color: #000;\n                color: #FFF;\n              }\n            '}})),o.a.createElement(x,null),o.a.createElement("div",{className:"jsx-790107873 documentation"},o.a.createElement(H,{updateSelected:this.updateSelected,currentSelection:this.state.currentSelection}),o.a.createElement("div",{className:"jsx-790107873 documentation__content"},o.a.createElement("div",{className:"jsx-790107873 documentation__header"},o.a.createElement(W,{active:"something"},this.props.meta.title)),o.a.createElement("div",{ref:function(n){return e.contentNode=n},className:"jsx-790107873 documentation__content"},this.props.children)),o.a.createElement(l.a,{styleId:"790107873",css:[".documentation.jsx-790107873{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-top:144px;}",".documentation__sidebar.jsx-790107873{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-left:56px;}",".documentation__header.jsx-790107873 h1.jsx-790107873{margin-top:0;}",".documentation__content.jsx-790107873{width:calc(100vw - 312px);max-width:600px;padding-right:56px;}","@media only screen and (max-width:912px){.documentation.jsx-790107873{padding-top:0px;}.documentation__content.jsx-790107873{width:calc(100vw - 10px);padding-right:5px;padding-left:5px;}}"]})))}}])&&le(t.prototype,r),m&&le(t,m),n}(),ue={h1:W,h2:function(e){var n=e.children;return o.a.createElement("div",{className:"jsx-2821545348"},o.a.createElement(ee,{lean:!0},o.a.createElement(B,null,n)),o.a.createElement(l.a,{styleId:"2821545348",css:["div.jsx-2821545348{margin:40px 0 0 0;}"]}))},h3:function(e){var n=e.children;return o.a.createElement("div",{className:"jsx-276056394"},o.a.createElement(ee,{lean:!0},o.a.createElement(V,null,n)),o.a.createElement(l.a,{styleId:"276056394",css:["div.jsx-276056394{margin:30px 0 0 0;}"]}))},h4:function(e){var n=e.children,t=F(e,["children"]);return o.a.createElement("h4",U({},t,{className:"jsx-2148262467 "+(null!=t.className&&t.className||"")}),n,o.a.createElement(l.a,{styleId:"2148262467",css:[".jsx-2148262467{font-size:1.6rem;font-weight:600;}"]}))},blockquote:function(e){var n=e.children,t=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(a=0;a<m.length;a++)t=m[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["children"]);return o.a.createElement("blockquote",G({},t,{className:"jsx-2455155431 "+(null!=t.className&&t.className||"")}),n,o.a.createElement(l.a,{styleId:"2455155431",css:["blockquote.jsx-2455155431{padding:14px 0;border-left:6px solid #000;margin-left:0;padding-left:32px;}","blockquote.jsx-2455155431 p{margin:0;}"]}))},code:function(e){var n=e.children,t=e.syntax;return o.a.createElement("pre",{className:"jsx-2288494592 "+((t?" ".concat(t):"")||"")},o.a.createElement("code",{className:"jsx-2288494592"},n),o.a.createElement(l.a,{styleId:"2288494592",css:["pre.jsx-2288494592{border:1px solid #eaeaea;padding:20px;margin:40px 0;white-space:pre;overflow:auto;-webkit-overflow-scrolling:touch;}","code.jsx-2288494592{color:#000000;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;font-size:13px;line-height:20px;}"]}))},inlineCode:function(e){var n=e.children,t=e.noWrap;return o.a.createElement("code",{className:"jsx-1052285736 "+(t?"no-wrap":"")},n,o.a.createElement(l.a,{styleId:"1052285736",css:["code.jsx-1052285736{color:#000000;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;font-size:0.9em;white-space:pre-wrap;padding:0.2em 0.4em;margin:0;background-color:rgba(27,31,35,0.05);border-radius:0.3em;}","code.no-wrap.jsx-1052285736{white-space:nowrap;}"]}))},a:T};n.default=function(){return o.a.createElement(ge,{meta:m},o.a.createElement(c,{components:ue}))}},221:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MDXTag=void 0;var a,o=t(222),r=(a=o)&&a.__esModule?a:{default:a};n.MDXTag=r.default},222:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=o(t(0));o(t(7));function o(e){return e&&e.__esModule?e:{default:e}}var r={inlineCode:"code",wrapper:"div"};n.default=function(e){var n=e.name,t=e.parentName,o=e.props,m=void 0===o?{}:o,c=e.children,p=e.components,l=void 0===p?{}:p,s=l[t+"."+n]||l[n]||r[n]||n;return a.default.createElement(s,m,c)}},267:function(e,n,t){var a=t(268),o={ease:a(.25,.1,.25,1),easeIn:a(.42,0,1,1),easeOut:a(0,0,.58,1),easeInOut:a(.42,0,.58,1),linear:a(0,0,1,1)};function r(){}e.exports=function(e,n,t){var a=Object.create(null),m=Object.create(null),c="function"==typeof(t=t||{}).easing?t.easing:o[t.easing];c||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),c=o.ease);var p="function"==typeof t.step?t.step:r,l="function"==typeof t.done?t.done:r,s=function(e){if(!e){var n="undefined"!=typeof window&&window.requestAnimationFrame;return n?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!=typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(t.scheduler),i=Object.keys(n);i.forEach(function(t){a[t]=e[t],m[t]=n[t]-e[t]});var g,u=t.duration||400,d=Math.max(1,.06*u),E=0;return g=s.next(function n(){var t=c(E/d);E+=1,function(n){i.forEach(function(t){e[t]=m[t]*n+a[t]})}(t),E<=d?(g=s.next(n),p(e)):(g=0,setTimeout(function(){l(e)},0))}),{cancel:function(){s.cancel(g),g=0}}}},268:function(e,n){var t=4,a=.001,o=1e-7,r=10,m=11,c=1/(m-1),p="function"==typeof Float32Array;function l(e,n){return 1-3*n+3*e}function s(e,n){return 3*n-6*e}function i(e){return 3*e}function g(e,n,t){return((l(n,t)*e+s(n,t))*e+i(n))*e}function u(e,n,t){return 3*l(n,t)*e*e+2*s(n,t)*e+i(n)}function d(e){return e}e.exports=function(e,n,l,s){if(!(0<=e&&e<=1&&0<=l&&l<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&l===s)return d;for(var i=p?new Float32Array(m):new Array(m),E=0;E<m;++E)i[E]=g(E*c,e,l);function h(n){for(var p=0,s=1,d=m-1;s!==d&&i[s]<=n;++s)p+=c;var E=p+(n-i[--s])/(i[s+1]-i[s])*c,h=u(E,e,l);return h>=a?function(e,n,a,o){for(var r=0;r<t;++r){var m=u(n,a,o);if(0===m)return n;n-=(g(n,a,o)-e)/m}return n}(n,E,e,l):0===h?E:function(e,n,t,a,m){var c,p,l=0;do{(c=g(p=n+(t-n)/2,a,m)-e)>0?t=p:n=p}while(Math.abs(c)>o&&++l<r);return p}(n,p,p+c,e,l)}return function(e){return 0===e?0:1===e?1:g(h(e),n,s)}}},269:function(e,n){!function(e,n){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(e){if(!this._observationTargets.some(function(n){return n.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(n){return n.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var n=e||[0];return Array.isArray(n)||(n=[n]),n.sort().filter(function(e,n,t){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==t[n-1]})},o.prototype._parseRootMargin=function(e){var n=(e||"0px").split(/\s+/).map(function(e){var n=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!n)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(n[1]),unit:n[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(e,"resize",this._checkForIntersections,!0),r(n,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(n,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,m(e,"resize",this._checkForIntersections,!0),m(n,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var n=this._rootIsInDom(),t=n?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(o){var r=o.element,m=c(r),p=this._rootContainsTarget(r),l=o.entry,s=n&&p&&this._computeTargetAndRootIntersection(r,t),i=o.entry=new a({time:e.performance&&performance.now&&performance.now(),target:r,boundingClientRect:m,rootBounds:t,intersectionRect:s});l?n&&p?this._hasCrossedThreshold(l,i)&&this._queuedEntries.push(i):l&&l.isIntersecting&&this._queuedEntries.push(i):this._queuedEntries.push(i)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(t,a){if("none"!=e.getComputedStyle(t).display){for(var o,r,m,p,s,i,g,u,d=c(t),E=l(t),h=!1;!h;){var f=null,T=1==E.nodeType?e.getComputedStyle(E):{};if("none"==T.display)return;if(E==this.root||E==n?(h=!0,f=a):E!=n.body&&E!=n.documentElement&&"visible"!=T.overflow&&(f=c(E)),f&&(o=f,r=d,void 0,void 0,void 0,void 0,void 0,void 0,m=Math.max(o.top,r.top),p=Math.min(o.bottom,r.bottom),s=Math.max(o.left,r.left),i=Math.min(o.right,r.right),u=p-m,!(d=(g=i-s)>=0&&u>=0&&{top:m,bottom:p,left:s,right:i,width:g,height:u})))break;E=l(E)}return d}},o.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var t=n.documentElement,a=n.body;e={top:0,left:0,right:t.clientWidth||a.clientWidth,width:t.clientWidth||a.clientWidth,bottom:t.clientHeight||a.clientHeight,height:t.clientHeight||a.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var n=this._rootMarginValues.map(function(n,t){return"px"==n.unit?n.value:n.value*(t%2?e.width:e.height)/100}),t={top:e.top-n[0],right:e.right+n[1],bottom:e.bottom+n[2],left:e.left-n[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},o.prototype._hasCrossedThreshold=function(e,n){var t=e&&e.isIntersecting?e.intersectionRatio||0:-1,a=n.isIntersecting?n.intersectionRatio||0:-1;if(t!==a)for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==t||r==a||r<t!=r<a)return!0}},o.prototype._rootIsInDom=function(){return!this.root||p(n,this.root)},o.prototype._rootContainsTarget=function(e){return p(this.root||n,e)},o.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},o.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},e.IntersectionObserver=o,e.IntersectionObserverEntry=a}function a(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var n=this.boundingClientRect,t=n.width*n.height,a=this.intersectionRect,o=a.width*a.height;this.intersectionRatio=t?o/t:this.isIntersecting?1:0}function o(e,n){var t,a,o,r=n||{};if("function"!=typeof e)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(t=this._checkForIntersections.bind(this),a=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout(function(){t(),o=null},a))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(e,n,t,a){"function"==typeof e.addEventListener?e.addEventListener(n,t,a||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+n,t)}function m(e,n,t,a){"function"==typeof e.removeEventListener?e.removeEventListener(n,t,a||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+n,t)}function c(e){var n;try{n=e.getBoundingClientRect()}catch(e){}return n?(n.width&&n.height||(n={top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.right-n.left,height:n.bottom-n.top}),n):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function p(e,n){for(var t=n;t;){if(t==e)return!0;t=l(t)}return!1}function l(e){var n=e.parentNode;return n&&11==n.nodeType&&n.host?n.host:n}}(window,document)}},[219]).default}});